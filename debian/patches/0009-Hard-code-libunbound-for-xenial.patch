From: Jason Rhinelander <jason@imaginary.ca>
Date: Thu, 9 Jan 2020 15:04:57 -0400
Subject: Hard-code libunbound for xenial

Xenial's libunbound doesn't have a .pc file so can't be found via
pkg-config; this just hard codes the values to what they should be for
xenial.
---
 external/CMakeLists.txt | 28 +---------------------------
 1 file changed, 1 insertion(+), 27 deletions(-)

diff --git a/external/CMakeLists.txt b/external/CMakeLists.txt
index 1b70a80..2572d47 100644
--- a/external/CMakeLists.txt
+++ b/external/CMakeLists.txt
@@ -62,33 +62,7 @@ else()
   target_link_libraries(miniupnpc INTERFACE libminiupnpc-static)
 endif()
 
-
-if(NOT UNBOUND_FOUND)
-  # NOTE: If STATIC is true, CMAKE_FIND_LIBRARY_SUFFIXES has been reordered.
-  # unbound has config tests which used OpenSSL libraries, so -ldl may need to
-  # be set in this case.
-  # The unbound CMakeLists.txt can set it, since it's also needed for the
-  # static OpenSSL libraries set up there after with target_link_libraries.
-  message(STATUS "Using in-tree unbound")
-  if(STATIC AND NOT IOS)
-    if(UNIX)
-      set(OPENSSL_LIBRARIES "${OPENSSL_LIBRARIES};${CMAKE_DL_LIBS};${CMAKE_THREAD_LIBS_INIT}")
-    elseif(MINGW)
-      set(OPENSSL_LIBRARIES "${OPENSSL_LIBRARIES};extra")
-    endif()
-  endif()
-  add_subdirectory(unbound)
-  target_link_libraries(libunbound INTERFACE unbound)
-  target_include_directories(libunbound INTERFACE unbound/libunbound)
-else()
-  message(STATUS "Found libunbound include (unbound.h) in ${UNBOUND_INCLUDE_DIRS}")
-  if(NOT UNBOUND_LIBRARIES)
-    message(FATAL_ERROR "Found libunbound includes, but could not find libunbound library. Please make sure you have installed libunbound or libunbound-dev or the equivalent")
-  endif()
-
-  link_dep_libs(libunbound INTERFACE "${UNBOUND_LIBRARY_DIRS}" ${UNBOUND_LIBRARIES})
-  target_include_directories(libunbound INTERFACE ${UNBOUND_INCLUDE_DIRS})
-endif()
+target_link_libraries(libunbound INTERFACE unbound OpenSSL::SSL OpenSSL::Crypto)
 
 if(NOT LOKIMQ_FOUND)
   message(STATUS "Using in-tree lokimq")
